<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script type="module">
        import { Pool } from "./Pool.js"
        let sleepFn = (e) => { return new Promise((resolve) => { setTimeout(() => {  resolve("执行一些延迟数据:",e); }, e); }); };
        let sleep = async(e) => {
            let varFn = await sleepFn()
            console.log(varFn)
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log("执行sleep:", e);
                    if (Math.random() > 0.5) {
                        reject(e);
                    }
                    resolve(e);
                }, e);
            });
        };
        let res 
        let temp = {
            eventBus: {
                finish: [(e) => {
                    console.log("触发finish方法:", e);
                }]
            },
            // 最大重试次数
            MaxRetryCount: 1,
            // 最大并发数
            MaxConcurrentCount: 2,
            // 异步数组
            PromiseArr: [() => {return sleep(0) }, () => {return sleep(1000) }, () => {
                setTimeout(() => {
                    res.pauseStatus(true);
                }, 1000);
                setTimeout(() => {
                    res.pauseStatus(false);
                }, 8000);
                return sleep(3000) 
            }, () => {return sleep(0) }],
            // 参数列表数组
        };
        res = new Pool(temp);
     

    </script>
</body>

</html>